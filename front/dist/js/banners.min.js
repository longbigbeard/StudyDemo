function Banners(){}Banners.prototype.createBannerItem=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-list-group"),r=null;r=n?(t.append(a),t.find(".banner-items:last")):(t.prepend(a),t.find(".banner-items:first")),e.addImageSelectEvent(r),e.addRemoveBannerEvent(r),e.addSaveBannerEvent(r)},Banners.prototype.loadData=function(){var r=this;myajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.createBannerItem(t)}}})},Banners.prototype.listenAddBannerEvent=function(){var n=this;$("#add-banner-btn").click(function(){6<=$(".banner-list-group").children().length?window.messageBox.showInfo("最多只能添加6张图片！"):n.createBannerItem()})},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),myajax.post({url:"/cms/upload_img_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.addRemoveBannerEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");n?myalert.alertConfirm({text:"您确定要删除这个轮播图吗？",confirmCallback:function(){myajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("删除成功！"))}})}}):e.remove()})},Banners.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),s=t.find("span[class='priority']"),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),e=i.val(),a=o.val();myajax.post({url:d,data:{image_url:n,priority:e,link_to:a,pk:c},success:function(n){200===n.code&&(c?window.messageBox.showSuccess("轮播图修改完成！"):(c=n.data.banner_id,t.attr("data-banner-id",c),window.messageBox.showSuccess("轮播图添加完成！")),s.text("优先级："+e))}})})},Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},$(function(){banners=new Banners,banners.run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsImNyZWF0ZUJhbm5lckl0ZW0iLCJiYW5uZXIiLCJzZWxmIiwidGhpcyIsInRwbCIsInRlbXBsYXRlIiwiYmFubmVyTGlzdEdyb3VwIiwiJCIsImJhbm5lckl0ZW0iLCJhcHBlbmQiLCJmaW5kIiwicHJlcGVuZCIsImFkZEltYWdlU2VsZWN0RXZlbnQiLCJhZGRSZW1vdmVCYW5uZXJFdmVudCIsImFkZFNhdmVCYW5uZXJFdmVudCIsImxvYWREYXRhIiwibXlhamF4IiwiZ2V0IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsImJhbm5lcnMiLCJpIiwibGVuZ3RoIiwibGlzdGVuQWRkQmFubmVyRXZlbnQiLCJjbGljayIsImNoaWxkcmVuIiwid2luZG93IiwibWVzc2FnZUJveCIsInNob3dJbmZvIiwiaW1hZ2UiLCJpbWFnZUlucHV0IiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInBvc3QiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsImF0dHIiLCJiYW5uZXJJZCIsIm15YWxlcnQiLCJhbGVydENvbmZpcm0iLCJ0ZXh0IiwiY29uZmlybUNhbGxiYWNrIiwiYmFubmVyX2lkIiwicmVtb3ZlIiwic2hvd1N1Y2Nlc3MiLCJzYXZlQnRuIiwiaW1hZ2VUYWciLCJwcmlvcml0eVRhZyIsImxpbmt0b1RhZyIsInByaW9yaXR5U3BhbiIsImltYWdlX3VybCIsInByaW9yaXR5IiwidmFsIiwibGlua190byIsInBrIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxXQUlUQSxRQUFRQyxVQUFVQyxpQkFBbUIsU0FBVUMsR0FDM0MsSUFBSUMsRUFBT0MsS0FDUEMsRUFBTUMsU0FBUyxjQUFlLENBQUNKLE9BQVVBLElBQ3pDSyxFQUFrQkMsRUFBRSxzQkFDcEJDLEVBQWEsS0FJYkEsRUFGQVAsR0FDQUssRUFBZ0JHLE9BQU9MLEdB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LEVBQUUsV0FDRWMsUUFBVSxJQUFJdkIsUUFDZHVCLFFBQVF1QyIsImZpbGUiOiJiYW5uZXJzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJhbm5lcnMoKSB7XHJcblxyXG59XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5jcmVhdGVCYW5uZXJJdGVtID0gZnVuY3Rpb24gKGJhbm5lcikge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHRwbCA9IHRlbXBsYXRlKCdiYW5uZXItaXRlbScsIHtcImJhbm5lclwiOiBiYW5uZXJ9KTtcclxuICAgIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKFwiLmJhbm5lci1saXN0LWdyb3VwXCIpO1xyXG4gICAgdmFyIGJhbm5lckl0ZW0gPSBudWxsO1xyXG5cclxuICAgIGlmIChiYW5uZXIpIHtcclxuICAgICAgICBiYW5uZXJMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKFwiLmJhbm5lci1pdGVtczpsYXN0XCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBiYW5uZXJMaXN0R3JvdXAucHJlcGVuZCh0cGwpO1xyXG4gICAgICAgIGJhbm5lckl0ZW0gPSBiYW5uZXJMaXN0R3JvdXAuZmluZChcIi5iYW5uZXItaXRlbXM6Zmlyc3RcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZi5hZGRJbWFnZVNlbGVjdEV2ZW50KGJhbm5lckl0ZW0pO1xyXG4gICAgc2VsZi5hZGRSZW1vdmVCYW5uZXJFdmVudChiYW5uZXJJdGVtKTtcclxuICAgIHNlbGYuYWRkU2F2ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUubG9hZERhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBteWFqYXguZ2V0KHtcclxuICAgICAgICAndXJsJzogJy9jbXMvYmFubmVyX2xpc3QvJyxcclxuICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBiYW5uZXJzID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJhbm5lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFubmVyID0gYmFubmVyc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZUJhbm5lckl0ZW0oYmFubmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5saXN0ZW5BZGRCYW5uZXJFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICB2YXIgYWRkQnRuID0gJChcIiNhZGQtYmFubmVyLWJ0blwiKTtcclxuICAgIGFkZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoJy5iYW5uZXItbGlzdC1ncm91cCcpO1xyXG4gICAgICAgIHZhciBsaXN0X2xlbmd0aCA9IGJhbm5lckxpc3RHcm91cC5jaGlsZHJlbigpLmxlbmd0aDtcclxuICAgICAgICBpZiAobGlzdF9sZW5ndGggPj0gNikge1xyXG4gICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93SW5mbyhcIuacgOWkmuWPquiDvea3u+WKoDblvKDlm77niYfvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5jcmVhdGVCYW5uZXJJdGVtKCk7XHJcbiAgICB9KVxyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkSW1hZ2VTZWxlY3RFdmVudCA9IGZ1bmN0aW9uIChiYW5uZXJJdGVtKSB7XHJcbiAgICB2YXIgaW1hZ2UgPSBiYW5uZXJJdGVtLmZpbmQoJy50aHVtYm5haWwnKTtcclxuICAgIHZhciBpbWFnZUlucHV0ID0gYmFubmVySXRlbS5maW5kKCcuaW1hZ2UtaW5wdXQnKTtcclxuICAgIC8vIOWbvueJh+S4jeiDveaJk+W8gOaWh+S7tumAieaLqVxyXG4gICAgaW1hZ2UuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGltYWdlSW5wdXQuY2xpY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGltYWdlSW5wdXQuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTtcclxuICAgICAgICBteWFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfaW1nX2ZpbGUvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKCdzcmMnLCB1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLmFkZFJlbW92ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcclxuICAgIHZhciBjbG9zZUJ0biA9IGJhbm5lckl0ZW0uZmluZChcIi5jbG9zZS1idG5cIik7XHJcblxyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lckl0ZW0uYXR0cignZGF0YS1iYW5uZXItaWQnKTtcclxuICAgICAgICBpZiAoYmFubmVySWQpIHtcclxuICAgICAgICAgICAgbXlhbGVydC5hbGVydENvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgJ3RleHQnOiBcIuaCqOehruWumuimgeWIoOmZpOi/meS4qui9ruaSreWbvuWQl++8n1wiLFxyXG4gICAgICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbXlhamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9jbXMvZGVsZXRlX2Jhbm5lci8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYW5uZXJfaWQnOiBiYW5uZXJJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIuWIoOmZpOaIkOWKn++8gVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBiYW5uZXJJdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufTtcclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLmFkZFNhdmVCYW5uZXJFdmVudCA9IGZ1bmN0aW9uIChiYW5uZXJJdGVtKSB7XHJcbiAgICB2YXIgc2F2ZUJ0biA9IGJhbm5lckl0ZW0uZmluZCgnLnNhdmUtYnRuJyk7XHJcbiAgICB2YXIgaW1hZ2VUYWcgPSBiYW5uZXJJdGVtLmZpbmQoJy50aHVtYm5haWwnKTtcclxuICAgIHZhciBwcmlvcml0eVRhZyA9IGJhbm5lckl0ZW0uZmluZChcImlucHV0W25hbWU9J3ByaW9yaXR5J11cIik7XHJcbiAgICB2YXIgbGlua3RvVGFnID0gYmFubmVySXRlbS5maW5kKFwiaW5wdXRbbmFtZT0nbGlua190byddXCIpO1xyXG4gICAgdmFyIHByaW9yaXR5U3BhbiA9IGJhbm5lckl0ZW0uZmluZChcInNwYW5bY2xhc3M9J3ByaW9yaXR5J11cIik7XHJcblxyXG4gICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKFwiZGF0YS1iYW5uZXItaWRcIik7XHJcbiAgICB2YXIgdXJsID0gJyc7XHJcbiAgICBpZiAoYmFubmVySWQpIHtcclxuICAgICAgICB1cmwgPSAnL2Ntcy9lZGl0X2Jhbm5lci8nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB1cmwgPSAnL2Ntcy9hZGRfYmFubmVyLyc7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGltYWdlX3VybCA9IGltYWdlVGFnLmF0dHIoJ3NyYycpO1xyXG4gICAgICAgIHZhciBwcmlvcml0eSA9IHByaW9yaXR5VGFnLnZhbCgpO1xyXG4gICAgICAgIHZhciBsaW5rX3RvID0gbGlua3RvVGFnLnZhbCgpO1xyXG5cclxuICAgICAgICBteWFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ2ltYWdlX3VybCc6IGltYWdlX3VybCxcclxuICAgICAgICAgICAgICAgICdwcmlvcml0eSc6IHByaW9yaXR5LFxyXG4gICAgICAgICAgICAgICAgJ2xpbmtfdG8nOiBsaW5rX3RvLFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogYmFubmVySWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmFubmVySWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoXCLova7mkq3lm77kv67mlLnlrozmiJDvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySWQgPSByZXN1bHRbJ2RhdGEnXVsnYmFubmVyX2lkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lckl0ZW0uYXR0cihcImRhdGEtYmFubmVyLWlkXCIsIGJhbm5lcklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoXCLova7mkq3lm77mt7vliqDlrozmiJDvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5U3Bhbi50ZXh0KFwi5LyY5YWI57qn77yaXCIgKyBwcmlvcml0eSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkFkZEJhbm5lckV2ZW50KCk7XHJcbiAgICBzZWxmLmxvYWREYXRhKCk7XHJcblxyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICBiYW5uZXJzID0gbmV3IEJhbm5lcnMoKTtcclxuICAgIGJhbm5lcnMucnVuKCk7XHJcbn0pOyJdfQ==
