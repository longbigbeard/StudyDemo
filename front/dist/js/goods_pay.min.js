function Ordering(){}Ordering.prototype.listenSubmitEvent=function(){$("#submit-order").click(function(e){e.preventDefault();var n=$("input[type=radio]:checked").val(),o=$('input[name="which-date"]').val(),r=$('select[name="person-nums"]').val(),t=$('input[name="telephone"]').val(),i=$('input[name="order_info"]').val(),a=$(this).attr("data-goods-id");t||(t="0"),o=o.replace(/-/g,"/");var d=new Date(o),c=new Date;n&&o&&r?d<c?window.messageBox.showError("您选择的时间有误！"):myajax.post({url:"/order/new_order/",data:{which_time:n,which_date:o,person_nums:r,order_tel:t,order_info:i,goods_pk:a},success:function(e){if(200===e.code){var n=e.data.order_id;console.log(n),myalert.alertConfirm({text:"订单创建完成，即将跳转到支付界面！",confirmCallback:function(){window.location.href="/order/"+n},cancelCallback:function(){window.messageBox.showError("您可以在个人中心查看订单并付款！")}})}}}):window.messageBox.showError("你的选择有误，请重新选择！")})},Ordering.prototype.run=function(){this.listenSubmitEvent()},$(function(){(new Ordering).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdvb2RzX3BheS5qcyJdLCJuYW1lcyI6WyJPcmRlcmluZyIsInByb3RvdHlwZSIsImxpc3RlblN1Ym1pdEV2ZW50IiwiJCIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIndoaWNoX3RpbWUiLCJ2YWwiLCJ3aGljaF9kYXRlIiwicGVyc29uX251bXMiLCJvcmRlcl90ZWwiLCJvcmRlcl9pbmZvIiwiZ29vZHNfcGsiLCJ0aGlzIiwiYXR0ciIsInJlcGxhY2UiLCJkYXRhIiwiRGF0ZSIsIm5vd2RhdGUiLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0Vycm9yIiwibXlhamF4IiwicG9zdCIsInVybCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJvcmRlcl9pZCIsImNvbnNvbGUiLCJsb2ciLCJteWFsZXJ0IiwiYWxlcnRDb25maXJtIiwidGV4dCIsImNvbmZpcm1DYWxsYmFjayIsImxvY2F0aW9uIiwiaHJlZiIsImNhbmNlbENhbGxiYWNrIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxZQUlUQSxTQUFTQyxVQUFVQyxrQkFBb0IsV0FDbkJDLEVBQUUsaUJBQ1JDLE1BQU0sU0FBVUMsR0FDdEJBLEVBQU1DLGlCQUNOLElBQUlDLEVBQWFKLEVBQUUsNkJBQTZCSyxNQUM1Q0MsRUFBYU4sRUFBRSw0QkFBNEJLLE1BQzNDRSxFQUFjUCxFQUFFLDhCQUE4QkssTUFDOUNHLEVBQVlSLEVBQUUsMkJBQTJCSyxNQUN6Q0ksRUFBYVQsRUFBRSw0QkFBNEJLLE1BRzNDSyxFQURNVixFQUFFVyxNQUNPQyxLQUFLLGlCQUNuQkosSUFDREEsRUFBWSxLQUVoQkYsRUFBYUEsRUFBV08sUUFBUSxLQUFNLEtBQ3RDLElBQUlDLEVBQU8sSUFBSUMsS0FBS1QsR0FDaEJVLEVBQVUsSUFBSUQsS0FDZFgsR0FBY0UsR0FBY0MsRUFDZE8sRUFBVkUsRUFDQUMsT0FBT0MsV0FBV0MsVUFBVSxhQUU1QkMsT0FBT0MsS0FBSyxDQUNSQyxJQUFPLG9CQUNQUixLQUFRLENBQ0pWLFdBQWNBLEVBQ2RFLFdBQWNBLEVBQ2RDLFlBQWVBLEVBQ2ZDLFVBQWFBLEVBQ2JDLFdBQWNBLEVBQ2RDLFNBQVlBLEdBRWhCYSxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVcsQ0FDeEIsSUFBSUMsRUFBV0QsRUFBYSxLQUFZLFNBQ3hDRSxRQUFRQyxJQUFJRixHQUNaRyxRQUFRQyxhQUFhLENBQ2pCQyxLQUFRLG9CQUNSQyxnQkFBbUIsV0FDZmQsT0FBT2UsU0FBU0MsS0FBTyxVQUFZUixHQUV2Q1MsZUFBa0IsV0FDZGpCLE9BQU9DLFdBQVdDLFVBQVUsMkJBUXBERixPQUFPQyxXQUFXQyxVQUFVLG9CQUt4Q3RCLFNBQVNDLFVBQVVxQyxJQUFNLFdBQ1Z4QixLQUNOWixxQkFHVEMsRUFBRSxZQUNpQixJQUFJSCxVQUNWc0MiLCJmaWxlIjoiZ29vZHNfcGF5Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIE9yZGVyaW5nKCkge1xyXG5cclxufVxyXG5cclxuT3JkZXJpbmcucHJvdG90eXBlLmxpc3RlblN1Ym1pdEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHN1Ym1pdEJ0biA9ICQoJyNzdWJtaXQtb3JkZXInKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciB3aGljaF90aW1lID0gJChcImlucHV0W3R5cGU9cmFkaW9dOmNoZWNrZWRcIikudmFsKCk7XHJcbiAgICAgICAgdmFyIHdoaWNoX2RhdGUgPSAkKCdpbnB1dFtuYW1lPVwid2hpY2gtZGF0ZVwiXScpLnZhbCgpO1xyXG4gICAgICAgIHZhciBwZXJzb25fbnVtcyA9ICQoJ3NlbGVjdFtuYW1lPVwicGVyc29uLW51bXNcIl0nKS52YWwoKTtcclxuICAgICAgICB2YXIgb3JkZXJfdGVsID0gJCgnaW5wdXRbbmFtZT1cInRlbGVwaG9uZVwiXScpLnZhbCgpO1xyXG4gICAgICAgIHZhciBvcmRlcl9pbmZvID0gJCgnaW5wdXRbbmFtZT1cIm9yZGVyX2luZm9cIl0nKS52YWwoKTtcclxuXHJcbiAgICAgICAgdmFyIGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGdvb2RzX3BrID0gYnRuLmF0dHIoJ2RhdGEtZ29vZHMtaWQnKTtcclxuICAgICAgICBpZiAoIW9yZGVyX3RlbCkge1xyXG4gICAgICAgICAgICBvcmRlcl90ZWwgPSAnMCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWNoX2RhdGUgPSB3aGljaF9kYXRlLnJlcGxhY2UoLy0vZywgJy8nKTtcclxuICAgICAgICB2YXIgZGF0YSA9IG5ldyBEYXRlKHdoaWNoX2RhdGUpO1xyXG4gICAgICAgIHZhciBub3dkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICBpZiAod2hpY2hfdGltZSAmJiB3aGljaF9kYXRlICYmIHBlcnNvbl9udW1zKSB7XHJcbiAgICAgICAgICAgIGlmIChub3dkYXRlID4gZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKFwi5oKo6YCJ5oup55qE5pe26Ze05pyJ6K+v77yBXCIpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBteWFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3VybCc6ICcvb3JkZXIvbmV3X29yZGVyLycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aGljaF90aW1lJzogd2hpY2hfdGltZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3doaWNoX2RhdGUnOiB3aGljaF9kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAncGVyc29uX251bXMnOiBwZXJzb25fbnVtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ29yZGVyX3RlbCc6IG9yZGVyX3RlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ29yZGVyX2luZm8nOiBvcmRlcl9pbmZvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZ29vZHNfcGsnOiBnb29kc19wayxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVyX2lkID0gcmVzdWx0WydkYXRhJ11bJ29yZGVyX2lkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhvcmRlcl9pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteWFsZXJ0LmFsZXJ0Q29uZmlybSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RleHQnOiBcIuiuouWNleWIm+W7uuWujOaIkO+8jOWNs+Wwhui3s+i9rOWIsOaUr+S7mOeVjOmdou+8gVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjb25maXJtQ2FsbGJhY2snOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvb3JkZXIvXCIgKyBvcmRlcl9pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjYW5jZWxDYWxsYmFjayc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKFwi5oKo5Y+v5Lul5Zyo5Liq5Lq65Lit5b+D5p+l55yL6K6i5Y2V5bm25LuY5qy+77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93RXJyb3IoXCLkvaDnmoTpgInmi6nmnInor6/vvIzor7fph43mlrDpgInmi6nvvIFcIilcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbk9yZGVyaW5nLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlblN1Ym1pdEV2ZW50KCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBvcmRlcmluZyA9IG5ldyBPcmRlcmluZygpO1xyXG4gICAgb3JkZXJpbmcucnVuKCk7XHJcbn0pOyJdfQ==
